# InVideo
#### Video Demo: [https://youtu.be/6I2qu6ukWHU](https://youtu.be/6I2qu6ukWHU)

# Disclaimer
This is an independent project to help people creating their videos, and also, created as part of CS50 course, as the final project. The developer is not responsible if your picture(s) is corrupt, or if you are not able to create the video properly for any reason that the application is not covering at this moment


# Use Case
In today's world, where every cell phone has a camera, it's common to see people taking multiple photos and videos.

This app was created based on my need to create videos. I have a lot of videos and photos, and I love create videos with them to send to my family and friends.

With InVideo, you can combine photos and videos and create a beautiful memory. Each video will have standard photos/videos, transitions, duration, and resolution.

# Requirements
The `requirements.txt` specifies the modules required for the application to work properly.

Ps.: Side note, the pyEXIFTool will be using the external binary `exiftool`, which is necessary to be in your system. You can download the binary from the link [https://exiftool.org/install.html](https://exiftool.org/install.html)

# Features
InVideo will allow you to:
- Upload photos and videos;
- Create videos with photos and videos;
- Download videos;
- Delete photos and videos.

#### Upload Files: 
Each user will upload photos and/or videos before generating the video. Users can upload as many files as they want.

#### Process Video: 
After uploading photos and/or videos, the user will generate the video through the processing option. The video will be generated in the background. At the end of the process, an "output.mp4" file will be generated.

#### Download Video:
After the video is processed, the "Download" option will be enabled. The user can preview the generated video and then download it.

#### Delete Files: 
If the user uploads a photo or video by mistake and wants to delete it, they currently only have the option to delete all uploaded files. Then, they will be able to upload the photos and/or videos again.


# Supportability and Results
The system has defined the following as allowed image files: 
- png
- jpg
- jpeg

and the following as allowed video files: 
- mp4
- mov

Each processed video will consist of the uploaded photos and/or videos, with a transition between files, duration, and resolution.

Initially, during video processing, a standard fade-in/fade-out transition will be inserted between the photos and videos. Each photo will last approximately 3 seconds. Currently, all videos will be generated with a default resolution of 1920 x 1080, full HD.

# Code / Functions
The **tasks.py** contains the following functions:

- `upload_files()`
    - Upload files selected by the user.

- `allowed_file()`
    - Ensure that only the defined extensions are accepted when uploading files.

- `crop_image()`
    - Sets the default height and width according to the image's position (vertical or horizontal).

- `process_video()`
    - Concatenates the existing files in the user's directory and processes the video at the end.

- `delete_files()`
    - Deletes the existing files in the user's directory and the video generated by the app.

- `base_dir()`
    - Concatenates the user_id with the name of the output video and the file folder to store the files uploaded by the user in their session.

- `apology()`
    - Renders a message as an apology to the user.

- `check_video_exists()`
    - Checks if the processed video exists. If yes, the View and download buttons will activate

- `check_file_upload_exists()`
    - Check if there are files sent. If yes, the process button will activate

- `check_quant_upload_exists()`
    - Check how many uploaded files exist to present on the main page for the user.

- `login_required()`
    - Decorate routes to require login.


**app.py** consists of the following functions:

- `login()`
    - Log user in.

- `logout()`
    - Log user out.

- `register()`
    - Register user.

- `changepass()`
    - Change user password

- `download_files()`
    - Download the video files in the user's Downloads directory.

- `upload_process_download()`
    - Identify which option the user is selecting on the app's main page.

- `about()`
    - Contains information about the InVideo.

- `faq()`
    - Frequently asked questions about the app.


The **InVideo** application consists of the following templates:
- `about.html`: 
    - contains a brief description of the application.
- `apology.html`: 
    - displays error messages.
- `changepass.html`: 
    - allows users to change their password by entering their email address and new password.
- `faq.html`: 
    - displays frequently asked questions.
- `index.html`: 
    - displays application features such as uploading, processing, downloading, and deleting files.
- `login.html`: 
    - asks for a username and password to log in to the application.
- `register.html`: 
    - asks for a username, email address, password, and confirmation password to register.
- `layout.html`: 
    - contains the template for other pages.

# Application Usage
To use the app, you need to register with `username`, `email address`, and `password`. After registering, you can log in and use the app.
You can:
- Register
- Change your password
- Log in
- Log out

Users who are `not logged in` will only be able to view the `About` and `FAQ` sections.

A database called `invideo.db` was created to store user information. A `users` table was created, and the email field was classified as a unique index.
```
CREATE TABLE users (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, username TEXT NOT NULL, email TEXT NOT NULL, hash TEXT NOT NULL, date DATETIME);
CREATE UNIQUE INDEX email ON users (email);
```

For each user logged in to the application, a folder with the `user_id` will be created within the `/images` folder. This will ensure that only the user has access to the files they uploaded.

When processing the video, the name of the generated output video file will also contain the `id_user`, ensuring that only the user has access to the video generated by the app with the user's files.

Users who have questions that the `FAQ` section failed to answer can send messages with questions or suggestions to the contact email `marcellestp@gmail.com`.


# Reference
- BootStrap
    - https://getbootstrap.com/
- Flask
    - https://flask.palletsprojects.com/
- Python
    - https://docs.python.org/
- Jinja
    - https://jinja.palletsprojects.com/en/stable/
- MoviePY
    - https://zulko.github.io/moviepy/
- Sqlite3
    - https://docs.python.org/3/library/sqlite3.html
    - https://www.sqlite.org/docs.html
- EXIFTool (pyExifTool)
    - https://sylikc.github.io/pyexiftool/examples.html
- MarkDown
    - https://www.markdownguide.org/basic-syntax/